<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è KGMarketplace</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>>–†–µ–¥–∞–∫—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è KGMarketplace</h1>
        <h1>>–°–ø–µ—Ü–æ–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã OdinSons üçú </h1>
        <div class="header-controls">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –¥–∏–∞–ª–æ–≥–∞–º...">
            <button id="importDialogueBtn">–ò–º–ø–æ—Ä—Ç –¥–∏–∞–ª–æ–≥–∞</button>
            <button id="importQuestBtn">–ò–º–ø–æ—Ä—Ç –∫–≤–µ—Å—Ç–∞</button>
            <button id="questsBtn">–ö–≤–µ—Å—Ç—ã</button>
            <button id="exportBtn">–≠–∫—Å–ø–æ—Ä—Ç .cfg</button>
            <button id="validateBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button id="previewBtn" class="play-btn">‚ñ∂</button>
        </div>
    </header>

    <main>
        <div class="workspace">
            <div class="toolbar">
                <button id="addNodeBtn">+ –î–æ–±–∞–≤–∏—Ç—å –¥–∏–∞–ª–æ–≥</button>
                <button id="addOptionBtn">+ –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é</button>
                <button id="deleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
                <div class="tool-separator"></div>
                <button id="zoomInBtn">+</button>
                <button id="zoomOutBtn">-</button>
                <button id="fitToScreenBtn">–ü–æ —Ä–∞–∑–º–µ—Ä—É</button>
            </div>

            <div class="canvas-container">
                <svg id="connectionLayer">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                                refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
                        </marker>
                    </defs>
                </svg>
                <div id="nodeContainer" class="node-container"></div>
            </div>
        </div>

        <div class="properties-panel">
            <div id="nodeProperties" class="properties-section">
                <h3>–î–∏–∞–ª–æ–≥ NPC</h3>
                <div class="form-group">
                    <label>ID –ø—Ä–æ—Ñ–∏–ª—è:</label>
                    <input type="text" id="nodeId" class="form-control">
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç NPC:</label>
                    <textarea id="nodeText" class="form-control" rows="3" placeholder="–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å \n –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏ –∏ —Ç–µ–≥–∏ &lt;color&gt;"></textarea>
                </div>
                
                <div class="node-options-section">
                    <h4>–û–ø—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–∞</h4>
                    <div id="nodeOptionsList" class="options-list"></div>
                    <button id="addNodeOptionBtn" class="btn-small">+ –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é</button>
                </div>
            </div>

            <div id="optionProperties" class="properties-section" style="display: none;">
                <h3>–û–ø—Ü–∏—è –∏–≥—Ä–æ–∫–∞</h3>
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç:</label>
                    <input type="text" id="optionText" class="form-control">
                </div>
                <div class="form-group">
                    <label>–ü–µ—Ä–µ—Ö–æ–¥ –∫:</label>
                    <select id="optionTransition" class="form-control">
                        <option value="">-- –ù–µ—Ç --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ò–∫–æ–Ω–∫–∞:</label>
                    <input type="text" id="optionIcon" class="form-control" placeholder="Hammer, SwordIron, etc.">
                </div>
                <div class="form-group">
                    <label>–¶–≤–µ—Ç:</label>
                    <input type="color" id="optionColor" class="form-control" value="#ffffff">
                </div>

                <div class="conditions-section">
                    <h4>–£—Å–ª–æ–≤–∏—è</h4>
                    <div id="conditionsList"></div>
                    <button id="addConditionBtn" class="btn-small">+ –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ</button>
                </div>

                <div class="commands-section">
                    <h4>–ö–æ–º–∞–Ω–¥—ã</h4>
                    <div id="commandsList"></div>
                    <button id="addCommandBtn" class="btn-small">+ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
                </div>
            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content preview-modal">
            <div class="modal-header">
                <h2>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–ª–æ–≥–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div id="previewContent" class="preview-content"></div>
        </div>
    </div>

    <div id="questsModal" class="modal" style="display: none;">
        <div class="modal-content quests-modal">
            <div class="modal-header">
                <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–≤–µ—Å—Ç–æ–≤</h2>
                <span class="close">&times;</span>
            </div>
            <div class="quests-container">
                <div class="quests-sidebar">
                    <div class="quests-header">
                        <h3>–ö–≤–µ—Å—Ç—ã</h3>
                        <button id="addQuestBtn" class="btn-small">+ –ù–æ–≤—ã–π –∫–≤–µ—Å—Ç</button>
                    </div>
                    <div id="questsList" class="quests-list"></div>
                </div>
                <div class="quest-editor">
                    <div id="questEditor" class="quest-editor-content">
                        <div class="no-quest-selected">
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–µ—Å—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="questPreviewModal" class="modal" style="display: none;">
        <div class="modal-content quest-preview-modal">
            <div class="modal-header">
                <h2>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–≤–µ—Å—Ç–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div id="questPreviewContent" class="quest-preview-content"></div>
        </div>
    </div>

    <div id="conditionModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–¢–∏–ø —É—Å–ª–æ–≤–∏—è:</label>
                    <select id="conditionType" class="form-control">
                        <option value="HasItem">HasItem</option>
                        <option value="NotHasItem">NotHasItem</option>
                        <option value="SkillMore">SkillMore</option>
                        <option value="QuestFinished">QuestFinished</option>
                    </select>
                </div>
                <div id="conditionParams"></div>
                <button id="saveConditionBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="commandModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–¢–∏–ø –∫–æ–º–∞–Ω–¥—ã:</label>
                    <select id="commandType" class="form-control">
                        <option value="GiveItem">GiveItem</option>
                        <option value="RemoveItem">RemoveItem</option>
                        <option value="GiveQuest">GiveQuest</option>
                        <option value="FinishQuest">FinishQuest</option>
                    </select>
                </div>
                <div id="commandParams"></div>
                <button id="saveCommandBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
            <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤ -->
    <div id="questTargetModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å –∫–≤–µ—Å—Ç–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Prefab –æ–±—ä–µ–∫—Ç–∞:</label>
                    <input type="text" id="targetPrefab" class="form-control" placeholder="Wolf, SwordIron, Pickable_Carrot">
                </div>
                <div class="form-group">
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" id="targetAmount" class="form-control" value="1" min="1">
                </div>
                <div class="form-group">
                    <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                    <input type="number" id="targetLevel" class="form-control" placeholder="–¢–æ–ª—å–∫–æ –¥–ª—è Kill –∏ Collect –∫–≤–µ—Å—Ç–æ–≤">
                </div>
                <button id="saveQuestTargetBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="questRewardModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É –∫–≤–µ—Å—Ç–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–¢–∏–ø –Ω–∞–≥—Ä–∞–¥—ã:</label>
                    <select id="rewardType" class="form-control">
                        <option value="Item">Item</option>
                        <option value="Skill">Skill</option>
                        <option value="Pet">Pet</option>
                        <option value="Skill_EXP">Skill_EXP</option>
                        <option value="EpicMMO_EXP">EpicMMO_EXP</option>
                        <option value="SetCustomValue">SetCustomValue</option>
                        <option value="AddCustomValue">AddCustomValue</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Prefab –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ:</label>
                    <input type="text" id="rewardPrefab" class="form-control" placeholder="SwordIron, Run, Wolf">
                </div>
                <div class="form-group">
                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" id="rewardAmount" class="form-control" value="1" min="1">
                </div>
                <div class="form-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                    <input type="number" id="rewardLevel" class="form-control" placeholder="–î–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –ø–∏—Ç–æ–º—Ü–µ–≤">
                </div>
                <button id="saveQuestRewardBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="questRequirementModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫–≤–µ—Å—Ç–∞</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–¢–∏–ø —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:</label>
                    <select id="questRequirementType" class="form-control">
                        <option value="HasItem">HasItem</option>
                        <option value="NotHasItem">NotHasItem</option>
                        <option value="SkillMore">SkillMore</option>
                        <option value="QuestFinished">QuestFinished</option>
                        <option value="QuestNotFinished">QuestNotFinished</option>
                        <option value="HasQuest">HasQuest</option>
                        <option value="NotHasQuest">NotHasQuest</option>
                    </select>
                </div>
                <div id="questRequirementParams"></div>
                <button id="saveQuestRequirementBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    </div>

    <!-- –°–∫—Ä—ã—Ç—ã–µ inputs –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–æ–≤ -->
    <input type="file" id="dialogueFileInput" accept=".cfg" style="display: none;">
    <input type="file" id="questFileInput" accept=".cfg" style="display: none;">

    <script src="script.js"></script>
</body>
</html>
